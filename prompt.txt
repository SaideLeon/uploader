Quero evoluir o backend do meu servi√ßo de upload desenvolvido em Go, adicionando um sistema de seguran√ßa baseado em n√≠veis de acesso. O backend atual permite fazer upload, listar, acessar e deletar arquivos organizados por projetos, mas ainda n√£o possui autentica√ß√£o, controle de permiss√µes ou pol√≠ticas de uso.

A nova vers√£o deve incluir:

1. Cria√ß√£o e autentica√ß√£o de usu√°rios

Sistema de cria√ß√£o de conta com email e senha.

Login retornando um JWT.

Cada usu√°rio deve ter seu pr√≥prio namespace l√≥gico de projetos.

Usu√°rios n√£o podem acessar projetos nem arquivos de outros usu√°rios.

2. Fornecimento de uma FORGE_API_KEY por usu√°rio

Quando o usu√°rio cria uma conta, o sistema deve gerar uma FORGE_API_KEY √∫nica.

Essa chave deve ser usada pelos desenvolvedores para autentica√ß√£o em requisi√ß√µes √† API.

A chave deve poder ser rotacionada (regenerada) sem quebrar o sistema.

3. N√≠veis de seguran√ßa e permiss√µes

Implementar pol√≠ticas de seguran√ßa reais, com:

Limite de tamanho de arquivos por upload.

Limite de n√∫mero de uploads/dia (rate-limit).

Valida√ß√£o de MIME-Type e extens√£o permitida.

Sanitiza√ß√£o obrigat√≥ria de nomes de projetos e arquivos.

Rejei√ß√£o autom√°tica de arquivos suspeitos.

Pagina√ß√£o nos endpoints de listagem.

Logs de auditoria: uploads, dele√ß√µes e falhas.

4. Revis√£o e melhoria estrutural

Corrigir premissas fr√°geis do design atual, incluindo:

Evitar exposi√ß√£o de endpoints sens√≠veis sem autentica√ß√£o.

Impedir cria√ß√£o infinita de projetos (limites ou regras).

Suporte futuro a driver de armazenamento (Local/S3/MinIO).

Melhor tratamento de concorr√™ncia e gera√ß√£o de nomes √∫nicos.

5. Endpoints devem usar autentica√ß√£o obrigat√≥ria

Todos os endpoints (/upload, /list, /projects, /delete) devem:

Exigir JWT ou FORGE_API_KEY.

Responder com erros claros quando faltar autentica√ß√£o.

6. Manter a simplicidade para o desenvolvedor

Apesar da seguran√ßa aumentada, o uso deve continuar simples:

curl -X POST https://uploader.../upload \
  -H "Authorization: Bearer <FORGE_API_KEY>" \
  -F "file=@imagem.png" \
  -F "project=meu-app"

üéØ Objetivo final

Transformar o servi√ßo atual de upload em uma API profissional, segura e adequada para uso p√∫blico por desenvolvedores externos, sem perder a simplicidade do fluxo principal.