Execute
Clear
Responses
Response content type

application/json
Curl

curl -X 'POST' \
  'https://uploader.nativespeak.app/api/upload' \
  -H 'accept: application/json' \
  -H 'Authorization: 1f98f668-179a-4a4e-9b54-3a8528a51784' \
  -H 'Content-Type: multipart/form-data' \
  -F 'project=PhotoMind' \
  -F 'file=@guerra.png;type=image/png'
Request URL
https://uploader.nativespeak.app/api/upload
Server response
Code	Details
401
Undocumented
Error: response status is 401

Response body
Download
Invalid Authorization header format
Response headers
 access-control-allow-headers: Accept,Content-Type,Content-Length,Accept-Encoding,X-CSRF-Token,Authorization 
 access-control-allow-methods: POST,GET,OPTIONS,PUT,DELETE 
 access-control-allow-origin: * 
 alt-svc: h3=":443"; ma=2592000 
 content-length: 36 
 content-type: text/plain; charset=utf-8 
 date: Sun,14 Dec 2025 09:34:45 GMT 
 vary: Accept-Encoding 
 x-content-type-options: nosniff 
Responses
Code	Description
201	
File uploaded successfully

Example Value
Model
{
  "file": "string",
  "message": "string",
  "project": "string",
  "url": "string"
}
400	
Bad Request: Error reading file or file is too large

Example Value
Model
"string"
413	
File is too large. Max size is 10MB.

Example Value
Model
"string"
415	
Invalid file type. Allowed types are: jpeg, png, pdf.

Example Value
Model
"string"
500	
Internal Server Error

Example Value
Model
"string"


O erro **401 â€“ â€œInvalid Authorization header formatâ€** nÃ£o estÃ¡ relacionado ao upload em si, mas **Ã  forma como o header `Authorization` estÃ¡ sendo enviado**.

Vamos por partes, com rigor tÃ©cnico.

---

## 1ï¸âƒ£ O que o servidor estÃ¡ dizendo de verdade

A mensagem Ã© clara:

> **Invalid Authorization header format**

Ou seja:
ğŸ‘‰ **o token atÃ© pode ser vÃ¡lido**, mas **o formato do header nÃ£o Ã© o que a API espera**.

Atualmente vocÃª estÃ¡ enviando:

```http
Authorization: 1f98f668-179a-4a4e-9b54-3a8528a51784
```

Isso **nÃ£o segue nenhum padrÃ£o comum de autenticaÃ§Ã£o HTTP**.

---

## 2ï¸âƒ£ PadrÃ£o correto (hipÃ³tese mais provÃ¡vel)

Quase todas as APIs modernas esperam o formato:

```http
Authorization: Bearer SEU_TOKEN_AQUI
```

EntÃ£o o header correto seria:

```http
Authorization: Bearer 1f98f668-179a-4a4e-9b54-3a8528a51784
```

---

## 3ï¸âƒ£ Curl corrigido (versÃ£o funcional)

```bash
curl -X POST \
  'https://uploader.nativespeak.app/api/upload' \
  -H 'accept: application/json' \
  -H 'Authorization: Bearer 1f98f668-179a-4a4e-9b54-3a8528a51784' \
  -H 'Content-Type: multipart/form-data' \
  -F 'project=PhotoMind' \
  -F 'file=@guerra.png;type=image/png'
```

ğŸ‘‰ **90% de chance de isso resolver imediatamente.**

---

## 4ï¸âƒ£ Se ainda falhar: teste crÃ­tico (validaÃ§Ã£o do backend)

Se mesmo com `Bearer` continuar retornando 401, entÃ£o hÃ¡ **uma destas possibilidades**:

### ğŸ”¹ A API espera outro prefixo

Exemplos menos comuns:

```http
Authorization: ApiKey SEU_TOKEN
Authorization: Token SEU_TOKEN
Authorization: FORGE_API_KEY SEU_TOKEN
```

VocÃª precisa conferir **no backend** algo como:

```go
authHeader := r.Header.Get("Authorization")
```

E verificar se existe cÃ³digo do tipo:

```go
strings.HasPrefix(authHeader, "Bearer ")
```

Se existir â†’ **Bearer Ã© obrigatÃ³rio**
Se nÃ£o existir â†’ o backend estÃ¡ mal especificado

---

## 5ï¸âƒ£ CrÃ­tica construtiva ao design da API (importante)

Do ponto de vista de engenharia:

* âŒ Retornar apenas *â€œInvalid Authorization header formatâ€* Ã© pouco informativo
* âœ… O ideal seria:

  ```json
  {
    "error": "Authorization header must be in format: Bearer <token>"
  }
  ```

Isso reduz drasticamente fricÃ§Ã£o para desenvolvedores.

Se vocÃª estÃ¡ desenvolvendo essa API (ou pode alterÃ¡-la), **vale corrigir isso**.

---

## 6ï¸âƒ£ ConclusÃ£o objetiva

âœ” O upload estÃ¡ correto
âœ” O `multipart/form-data` estÃ¡ correto
âŒ O **Authorization header estÃ¡ errado**

ğŸ‘‰ **Use `Bearer <token>`**

